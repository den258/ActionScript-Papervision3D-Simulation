package {	import flash.display.*;	import flash.events.*;	import flash.utils.*;	import fl.controls.Slider;	import fl.events.SliderEvent;		import org.papervision3d.scenes.Scene3D;	import org.papervision3d.objects.DisplayObject3D;	import org.papervision3d.objects.primitives.*;	import org.papervision3d.cameras.*;	import org.papervision3d.view.Viewport3D;	import org.papervision3d.render.BasicRenderEngine;	import org.papervision3d.materials.*;	import org.papervision3d.materials.utils.MaterialsList;	import org.papervision3d.core.geom.Lines3D;	import org.papervision3d.materials.special.LineMaterial;	[SWF(width="1024", height="568", backgroundColor="#CCCCCC", frameRate="50")]	public class Main extends Sprite {			private var scene:Scene3D;		private var camera:Camera3D;		private var viewport:Viewport3D;		private var renderer:BasicRenderEngine;		private var cube:Cube;				private var stageW:Number;		private var stageH:Number;		private var vpX:Number;		private var vpY:Number;				private var cameraInfo:CameraInfo;		private var sliders:Sliders;			private var time:Number = 0;		private var secondTime:Number = 0;		private var previousSecondTime:Number = 0;		private var frameNum:Number = 0;		private var fps:String = "...";				private var myrotationXSlider:Slider;		private var myrotationYSlider:Slider;		private var myrotationZSlider:Slider;		private var myscaleSlider:Slider;		private var myscaleXSlider:Slider;		private var myscaleYSlider:Slider;		private var myscaleZSlider:Slider;		private var myxSlider:Slider;		private var myySlider:Slider;		private var myzSlider:Slider;				// -- SWC書き出しのためのインスタンス化 Start -- //		private var m_1:Back = new Back();		private var m_2:Bottom = new Bottom();		private var m_3:Front = new Front();		private var m_4:Left = new Left();		private var m_5:Right = new Right();		private var m_6:Top = new Top();		// -- SWC書き出しのためのインスタンス化 End -- //				public function Main () {						init();		}			private function init():void {			setStage();			setScene();			setCamera();			setDO3D();			setCameraInfo();			setSliders();						addEventListener(Event.ENTER_FRAME, onEnterFrameHandler);			stage.addEventListener(Event.RESIZE, onStageResizeHandler);		}				private function setStage():void {			stage.quality = StageQuality.MEDIUM;			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;			stageW = stage.stageWidth;			stageH = stage.stageHeight;			vpX = stageW / 2;			vpY = stageH / 2;		}				private function setCameraInfo():void {			cameraInfo = new CameraInfo();			addChild(cameraInfo);			stageW = stage.stageWidth;			stageH = stage.stageHeight;			vpX = stageW / 2;			vpY = stageH / 2;			cameraInfo.x = stageW;			cameraInfo.y = stageH;		}				private function setScene():void{			renderer = new BasicRenderEngine();			scene = new Scene3D();			viewport  = new Viewport3D(0, 0, true, true);			addChild(viewport);		}				private function setCamera():void {			camera = new Camera3D();			camera.x = 0;			camera.y = 100;			camera.z = -900;			camera.zoom = 30;			camera.focus = 30;		}				private function setDO3D():void {			var materialPlane:WireframeMaterial = new WireframeMaterial(0x666666, 1);			materialPlane.oneSide = false;			var plane:Plane = new Plane(materialPlane, 2000, 2000, 8, 8);			plane.rotationX = 90;			scene.addChild(plane);						var materialList:MaterialsList = new MaterialsList({				front: new MovieAssetMaterial("Front", true ),				back: new MovieAssetMaterial("Back", true ),				right: new MovieAssetMaterial("Right", true ),				left: new MovieAssetMaterial("Left", true ),				top: new MovieAssetMaterial("Top", true ),				bottom: new MovieAssetMaterial("Bottom", true )			});			cube = new Cube(materialList, 200, 200, 200, 6, 6, 6);			cube.x = 0;			cube.y = 150;			cube.z = 0;			scene.addChild(cube);			camera.target = cube;			setAxes();		}				private function setAxes():void {			var axisX:Lines3D = new Lines3D(new LineMaterial(0x00FF00));			cube.addChild(axisX);			axisX.addNewLine(2, 100, 0, 0, 200, 0, 0);			var axisY:Lines3D = new Lines3D(new LineMaterial(0x0000FF));			cube.addChild(axisY);			axisY.addNewLine(2, 0, 100, 0, 0, 200, 0);			var axisZ:Lines3D = new Lines3D(new LineMaterial(0xFF0000));			cube.addChild(axisZ);			axisZ.addNewLine(2, 0, 0, 100, 0, 0, 200);		}				private function setSliders():void {			sliders = new Sliders();			addChild(sliders);			myrotationXSlider = sliders.myrotationXSlider;			myrotationYSlider = sliders.myrotationYSlider;			myrotationZSlider = sliders.myrotationZSlider;			myscaleSlider = sliders.myscaleSlider;			myscaleXSlider = sliders.myscaleXSlider;			myscaleYSlider = sliders.myscaleYSlider;			myscaleZSlider = sliders.myscaleZSlider;			myxSlider = sliders.myxSlider;			myySlider = sliders.myySlider;			myzSlider = sliders.myzSlider;			myrotationXSlider.value = cube.rotationX;			myrotationYSlider.value = cube.rotationY;			myrotationZSlider.value = cube.rotationZ;			myscaleSlider.value = cube.scale;			myscaleXSlider.value = cube.scaleX;			myscaleYSlider.value = cube.scaleY;			myscaleZSlider.value = cube.scaleZ;			myxSlider.value = cube.x;			myySlider.value = cube.y;			myzSlider.value = cube.z;						myrotationXSlider.addEventListener(SliderEvent.THUMB_DRAG, myrotationXSliderDragHandler);			myrotationYSlider.addEventListener(SliderEvent.THUMB_DRAG, myrotationYSliderDragHandler);			myrotationZSlider.addEventListener(SliderEvent.THUMB_DRAG, myrotationZSliderDragHandler);			myscaleSlider.addEventListener(SliderEvent.THUMB_DRAG, myscaleSliderDragHandler);			myscaleXSlider.addEventListener(SliderEvent.THUMB_DRAG, myscaleXSliderDragHandler);			myscaleYSlider.addEventListener(SliderEvent.THUMB_DRAG, myscaleYSliderDragHandler);			myscaleZSlider.addEventListener(SliderEvent.THUMB_DRAG, myscaleZSliderDragHandler);			myxSlider.addEventListener(SliderEvent.THUMB_DRAG, myxSliderDragHandler);			myySlider.addEventListener(SliderEvent.THUMB_DRAG, myySliderDragHandler);			myzSlider.addEventListener(SliderEvent.THUMB_DRAG, myzSliderDragHandler);		}				private function getFPS():void {			time = getTimer();			secondTime = time - previousSecondTime;			if(secondTime >= 1000) {				fps = frameNum.toString();				frameNum = 0;				previousSecondTime = time;			} else {				frameNum++;			}			cameraInfo.fpsText.text = fps+"FPS";			cameraInfo.cameraX.text = camera.x.toString();			cameraInfo.cameraY.text = camera.y.toString();			cameraInfo.cameraZ.text = camera.z.toString();			cameraInfo.cubeRotationX.text = cube.rotationX.toString();			cameraInfo.cubeRotationY.text = cube.rotationY.toString();			cameraInfo.cubeRotationZ.text = cube.rotationZ.toString();			cameraInfo.cubeScale.text = cube.scale.toString();			cameraInfo.cubeScaleX.text = cube.scaleX.toString();			cameraInfo.cubeScaleY.text = cube.scaleY.toString();			cameraInfo.cubeScaleZ.text = cube.scaleZ.toString();			cameraInfo.cubeSceneX.text = cube.sceneX.toString();			cameraInfo.cubeSceneY.text = cube.sceneY.toString();			cameraInfo.cubeSceneZ.text = cube.sceneZ.toString();			cameraInfo.cubePosition.text = cube.position.toString();			cameraInfo.cubeX.text = cube.x.toString();			cameraInfo.cubeY.text = cube.y.toString();			cameraInfo.cubeZ.text = cube.z.toString();		}			private function onEnterFrameHandler(event:Event):void {			renderer.renderScene(scene, camera, viewport);			getFPS();		}				private function onStageResizeHandler(event:Event):void {			stageW = stage.stageWidth;			stageH = stage.stageHeight;			vpX = stageW / 2;			vpY = stageH / 2;			cameraInfo.x = stageW;			cameraInfo.y = stageH;		}				private function myrotationXSliderDragHandler(event:SliderEvent):void {			cube.rotationX = myrotationXSlider.value;		}				private function myrotationYSliderDragHandler(event:SliderEvent):void {			cube.rotationY = myrotationYSlider.value;		}				private function myrotationZSliderDragHandler(event:SliderEvent):void {			cube.rotationZ = myrotationZSlider.value;		}				private function myscaleSliderDragHandler(event:SliderEvent):void {			cube.scale = myscaleSlider.value;		}				private function myscaleXSliderDragHandler(event:SliderEvent):void {			cube.scaleX = myscaleXSlider.value;		}				private function myscaleYSliderDragHandler(event:SliderEvent):void {			cube.scaleY = myscaleYSlider.value;		}				private function myscaleZSliderDragHandler(event:SliderEvent):void {			cube.scaleZ = myscaleZSlider.value;		}				private function myxSliderDragHandler(event:SliderEvent):void {			cube.x = myxSlider.value;		}				private function myySliderDragHandler(event:SliderEvent):void {			cube.y = myySlider.value;		}				private function myzSliderDragHandler(event:SliderEvent):void {			cube.z = myzSlider.value;		}	}}